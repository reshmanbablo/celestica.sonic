#!/usr/bin/python
# -*- coding: utf-8 -*-
# Copyright 2024 Celestica. All Rights Reserved
# GNU General Public License v3.0+
# (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)

#############################################
#                WARNING                    #
#############################################
#
# This file is auto generated by the resource
#   module builder playbook.
#
# Do not edit this file manually.
#
# Changes to this file will be over written
#   by the resource module builder.
#
# Changes should be made in the model used to
#   generate this file or in the resource module
#   builder template.
#
#############################################

"""
The module file for qos_map
"""

from __future__ import absolute_import, division, print_function
__metaclass__ = type

ANSIBLE_METADATA = {
    'metadata_version': '1.1',
    'status': ['preview'],
    'supported_by': 'community',
    'license': 'Apache 2.0'
}

DOCUMENTATION = """
---
module: qos_map
version_added: '1.0.0'
short_description: Resource module to configure QoS maps.
description:
  - This module configures and manages QoS maps on devices running Celestica SONiC NOS.
author: Celestica SONiC Ansible Team (@dharmaraj-gurusamy)
notes:
  - Tested against Advanced Celestica SONiC, release 2.0.
  - This module works with connection C(network_cli).
options:
  config:
    description:
      - A dictionary of QoS map configurations.
    type: dict
    suboptions:
      # QoS dot1p-tc map config
      dot1p-tc:
        description:
          - QoS dot1p-tc map configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the dot1p-tc map. Maximum of 32 characters.
            type: str
            required: true
          dot1p:
            description:
              - Dot1p to traffic class mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - DOT1P value, Range is 0-7.
                type: int
                required: true
              traffic-class:
                description:
                  - Traffic class value, Range is 0-7.
                type: int

      # QoS dscp-tc map config
      dscp-tc:
        description:
          - QoS dscp-tc map configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the dscp-tc map. Maximum of 32 characters.
            type: str
            required: true
          dscp:
            description:
              - DSCP to traffic class mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - DSCP value, Range is 0-63.
                type: int
                required: true
              traffic-class:
                description:
                  - Traffic class value, Range is 0-7.
                type: int

      # QoS pfc-priority-queue map config
      pfc-priority-queue:
        description:
          - QoS pfc-priority-queue map configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the pfc-priority-queue map. Maximum of 32 characters.
            type: str
            required: true
          pfc-priority:
            description:
              - PFC priority to queue mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - PFC priority value, Range is 0-7.
                type: int
                required: true
              queue:
                description:
                  - Queue index, Range is 0-7.
                type: int

      # QoS map tc-dot1p config
      tc-dot1p:
        description:
          - QoS map tc-dot1p configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the tc-dot1p map. Maximum of 32 characters.
            type: str
            required: true
          traffic-class:
            description:
              - Traffic class to DOT1P mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - Traffic class value, Range is 0-7.
                type: int
                required: true
              dot1p:
                description:
                  - DOT1P value, Range is 0-7.
                type: int

      # QoS tc-dscp map config
      tc-dscp:
        description:
          - QoS tc-dscp map configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the tc-dscp map. Maximum of 32 characters.
            type: str
            required: true
          traffic-class:
            description:
              - Traffic class to DSCP mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - Traffic class value, Range is 0-7.
                type: int
                required: true
              dscp:
                description:
                  - DSCP value, Range is 0-7.
                type: int

      # QoS tc-piority-group map config
      tc-priority-group:
        description:
          - QoS map configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the tc-piority-group map. Maximum of 32 characters.
            type: str
            required: true
          traffic-class:
            description:
              - Traffic class to priority group mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - Traffic class value, Range is 0-7.
                type: int
                required: true
              priority-group:
                description:
                  - Priority group value, Range is 0-7.
                type: int

      # QoS tc-queue map config
      tc-queue:
        description:
          - QoS tc-queue map configurations.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Name of the tc-queue map. Maximum of 32 characters.
            type: str
            required: true
          traffic-class:
            description:
              - Traffic class to queue mappings.
            type: list
            elements: dict
            suboptions:
              id:
                description:
                  - Traffic class value, Range is 0-7.
                type: int
                required: true
              queue:
                description:
                  - Queue index, Range is 0-7.
                type: int

      # QoS map config on interfaces
      interface:
        description:
          - QoS map configurations on interfaces.
        type: list
        elements: dict
        suboptions:
          name:
            description:
              - Full interface name, ie, Ethernet0.
              - Only Ethernet interfaces are allowed.
            type: str
            required: true
          dot1p-tc:
            description:
              - Name of the dot1p-tc map. Maximum of 32 characters.
            type: str
          dscp-tc:
            description:
              - Name of the dscp-tc map. Maximum of 32 characters.
            type: str
          pfc-priority-queue:
            description:
              - Name of the pfc-priority-queue map. Maximum of 32 characters.
            type: str
          tc-dot1p:
            description:
              - Name of the tc-dot1p map. Maximum of 32 characters.
            type: str
          tc-dscp:
            description:
              - Name of the tc-dscp map. Maximum of 32 characters.
            type: str
          tc-priority-group:
            description:
              - Name of the tc-priority-group map. Maximum of 32 characters.
            type: str
          tc-queue:
            description:
              - Name of the tc-queue map. Maximum of 32 characters.
            type: str

  state:
      description:
        - The state of the configuration after module completion.
        - C(merged) - Merge specified configuration with on-device running configuration.
        - C(deleted) - Delete the specified on-device running configuration or applies the default value.
      type: str
      choices:
        - merged
        - deleted
      default: merged
"""
EXAMPLES = """
# Using state : merged
#
# Before state:
# -------------
#
# Celestica-DS1000# show running-config qos map dot1p-tc
# !
# qos map dot1p-tc dot1p_tc_test1
#  dot1p 1 traffic-class 4
# !
# interface Ethernet 0
#  qos-map dot1p-tc dot1p_tc_test1
# Celestica-DS1000# show running-config qos map dscp-tc
# Celestica-DS1000# show running-config qos map pfc-priority-queue
# Celestica-DS1000# show running-config qos map tc-dot1p
# Celestica-DS1000# show running-config qos map tc-dscp
# Celestica-DS1000# show running-config qos map tc-pg
# Celestica-DS1000# show running-config qos map tc-queue
# Celestica-DS1000#
#
# Play:
# ----
#
    - name: Merge QoS Map Configuration
      celestica.sonic.qos_map:
        config:
          dot1p-tc:
            - name: dot1p_tc_test1
              dot1p:
                - id: 2
                  traffic-class: 3
            - name: dot1p_tc_test2
              dot1p:
                - id: 1
                  traffic-class: 5
                - id: 3
                  traffic-class: 2
          dscp-tc:
            - name: dscp_tc_test1
              dscp:
                - id: 1
                  traffic-class: 4
          pfc-priority-queue:
            - name: pfc_priority_queue_test1
              pfc-priority:
                - id: 3
                  queue: 5
          tc-dot1p:
            - name: tc_dot1p_test1
              traffic-class:
                - id: 1
                  dot1p: 7
          tc-dscp:
            - name: tc_dscp_test1
              traffic-class:
                - id: 3
                  dscp: 6
          tc-priority-group:
            - name: tc_priority_group_test1
              traffic-class:
                - id: 2
                  priority-group: 4
          tc-queue:
            - name: tc_queue_test1
              traffic-class:
                - id: 5
                  queue: 6

        state: merged

    - name: Merge QoS Map Configuration
      celestica.sonic.qos_map:
        config:
          interface:
            - name: Ethernet0
              dot1p-tc: dot1p_tc_test1
              dscp-tc: dscp_tc_test1
              pfc-priority-queue: pfc_priority_queue_test1
              tc-dot1p: tc_dot1p_test1
              tc-dscp: tc_dscp_test1
              tc-priority-group: tc_priority_group_test1
              tc-queue: tc_queue_test1
            - name: Ethernet1
              dot1p-tc: dot1p_tc_test2

        state: merged


# After state:
# ------------
#
# Celestica-DS1000# show running-config qos map dot1p-tc
# !
# qos map dot1p-tc dot1p_tc_test1
#  dot1p 1 traffic-class 4
#  dot1p 2 traffic-class 3
# !
# qos map dot1p-tc dot1p_tc_test2
#  dot1p 1 traffic-class 5
#  dot1p 3 traffic-class 2
# !
# interface Ethernet 0
#  qos-map dot1p-tc dot1p_tc_test1
# !
# interface Ethernet 1
#  qos-map dot1p-tc dot1p_tc_test2
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map dscp-tc
# !
# qos map dscp-tc dscp_tc_test1
#  dscp 1 traffic-class 4
# !
# interface Ethernet 0
#  qos-map dscp-tc dscp_tc_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map pfc-priority-queue
# !
# qos map pfc-priority-queue pfc_priority_queue_test1
#  pfc-priority 3 queue 5
# !
# interface Ethernet 0
#  qos-map pfc-priority-queue pfc_priority_queue_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-dot1p
# !
# qos map tc-dot1p tc_dot1p_test1
#  traffic-class 1 dot1p 7
# !
# interface Ethernet 0
#  qos-map tc-dot1p tc_dot1p_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-dscp
# !
# qos map tc-dscp tc_dscp_test1
#  traffic-class 3 dscp 6
# !
# interface Ethernet 0
#  qos-map tc-dscp tc_dscp_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-pg
# !
# qos map tc-pg tc_priority_group_test1
#  traffic-class 2 priority-group 4
# !
# interface Ethernet 0
#  qos-map tc-pg tc_priority_group_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-queue
# !
# qos map tc-queue tc_queue_test1
#  traffic-class 5 queue 6
# !
# interface Ethernet 0
#  qos-map tc-queue tc_queue_test1
# Celestica-DS1000#


# Using state : deleted
#
# Before state:
# -------------
# Celestica-DS1000# show running-config qos map dot1p-tc
# !
# qos map dot1p-tc dot1p_tc_test1
#  dot1p 1 traffic-class 4
#  dot1p 2 traffic-class 3
# !
# qos map dot1p-tc dot1p_tc_test2
#  dot1p 1 traffic-class 5
#  dot1p 3 traffic-class 2
# !
# interface Ethernet 0
#  qos-map dot1p-tc dot1p_tc_test1
# !
# interface Ethernet 1
#  qos-map dot1p-tc dot1p_tc_test2
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map dscp-tc
# !
# qos map dscp-tc dscp_tc_test1
#  dscp 1 traffic-class 4
# !
# interface Ethernet 0
#  qos-map dscp-tc dscp_tc_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map pfc-priority-queue
# !
# qos map pfc-priority-queue pfc_priority_queue_test1
#  pfc-priority 3 queue 5
# !
# interface Ethernet 0
#  qos-map pfc-priority-queue pfc_priority_queue_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-dot1p
# !
# qos map tc-dot1p tc_dot1p_test1
#  traffic-class 1 dot1p 7
# !
# interface Ethernet 0
#  qos-map tc-dot1p tc_dot1p_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-dscp
# !
# qos map tc-dscp tc_dscp_test1
#  traffic-class 3 dscp 6
# !
# interface Ethernet 0
#  qos-map tc-dscp tc_dscp_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-pg
# !
# qos map tc-pg tc_priority_group_test1
#  traffic-class 2 priority-group 4
# !
# interface Ethernet 0
#  qos-map tc-pg tc_priority_group_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map tc-queue
# !
# qos map tc-queue tc_queue_test1
#  traffic-class 5 queue 6
# !
# interface Ethernet 0
#  qos-map tc-queue tc_queue_test1
# Celestica-DS1000#
#
# Play:
# ----
#
    - name: Delete QoS Map Configuration
      celestica.sonic.qos_map:
        config:
          interface:
            - name: Ethernet0
              pfc-priority-queue: pfc_priority_queue_test1
              tc-dot1p: tc_dot1p_test1
            - name: Ethernet1
              dot1p-tc: dot1p_tc_test2

        state: deleted

    - name: Delete QoS Map Configuration
      celestica.sonic.qos_map:
        config:
          dot1p-tc:
            - name: dot1p_tc_test1
              dot1p:
                - id: 2
                  traffic-class: 3
            - name: dot1p_tc_test2
              dot1p:
                - id: 1
                  traffic-class: 5
          dscp-tc:
            - name: dscp_tc_test1
              dscp:
                - id: 1
                  traffic-class: 4
          pfc-priority-queue:
            - name: pfc_priority_queue_test1
          tc-dot1p:
            - name: tc_dot1p_test1

        state: deleted

# After state:
# ------------
#
# Celestica-DS1000# show running-config qos map dot1p-tc
# !
# qos map dot1p-tc dot1p_tc_test1
#  dot1p 1 traffic-class 4
# !
# qos map dot1p-tc dot1p_tc_test2
#  dot1p 3 traffic-class 2
# !
# interface Ethernet 0
#  qos-map dot1p-tc dot1p_tc_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map dscp-tc
# !
# qos map dscp-tc dscp_tc_test1
# !
# interface Ethernet 0
#  qos-map dscp-tc dscp_tc_test1
# Celestica-DS1000#
# Celestica-DS1000# show running-config qos map pfc-priority-queue
# Celestica-DS1000# show running-config qos map tc-dot1p
# Celestica-DS1000# show running-config qos map tc-dscp
# !
# qos map tc-dscp tc_dscp_test1
#  traffic-class 3 dscp 6
# !
# interface Ethernet 0
#  qos-map tc-dscp tc_dscp_test1
# Celestica-DS1000# show running-config qos map tc-pg
# !
# qos map tc-pg tc_priority_group_test1
#  traffic-class 2 priority-group 4
# !
# interface Ethernet 0
#  qos-map tc-pg tc_priority_group_test1
# Celestica-DS1000# show running-config qos map tc-queue
# !
# qos map tc-queue tc_queue_test1
#  traffic-class 5 queue 6
# !
# interface Ethernet 0
#  qos-map tc-queue tc_queue_test1
# Celestica-DS1000#


"""
RETURN = """
before:
  description: The configuration prior to the model invocation.
  returned: always
  sample: >
    The configuration returned will always be in the same format
     of the parameters above.
after:
  description: The resulting configuration model invocation.
  returned: when changed
  sample: >
    The configuration returned will always be in the same format
     of the parameters above.
commands:
  description: The set of commands pushed to the remote device.
  returned: always
  type: list
  sample: ['command 1', 'command 2', 'command 3']
"""


from ansible.module_utils.basic import AnsibleModule
from ansible_collections.celestica.sonic.plugins.module_utils.network.sonic.argspec.qos_map.qos_map import Qos_mapArgs
from ansible_collections.celestica.sonic.plugins.module_utils.network.sonic.config.qos_map.qos_map import Qos_map


def main():
    """
    Main entry point for module execution

    :returns: the result form module invocation
    """
    module = AnsibleModule(argument_spec=Qos_mapArgs.argument_spec,
                           supports_check_mode=True)

    result = Qos_map(module).execute_module()
    module.exit_json(**result)


if __name__ == '__main__':
    main()
